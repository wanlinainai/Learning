# 百晓知识库

## 知识管理平台

![image-20251109191638565](images/百晓知识库/image-20251109191638565.png)







## 智能对话

![image-20251109192044176](images/百晓知识库/image-20251109192044176.png)





## 知识库

![image-20251109192436401](images/百晓知识库/image-20251109192436401.png)





## 联网搜索

![image-20251109192909173](images/百晓知识库/image-20251109192909173.png)





## 智能推荐

![image-20251109193141304](images/百晓知识库/image-20251109193141304.png)

## 技术选择性

| 项目     | 作用                                     | 技术栈考虑（考虑数据安全）                                   | 技术栈推荐（不考虑数据安全）                                 |
| -------- | ---------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 知识管理 | 1. 完成数据工程<br />2. 完成知识增删改查 | 1. PDF文件解析：目标检测模型（YOLOX）和OCR模型<br />2. 开发框架：Langchain、LlamaIndex等等<br />3. embedding模型：尽量适配选用的大模型 | 1. PDF文件解析：基于多模态大模型，如GPT-4o<br />2. 开发框架：Langchain、LlamaIndex等等<br />3. Embedding模型：最好与大模型适配 |
| 知识检索 | 1. 知识检索                              | 1. 大模型：开源模型（Qwen系列、GLM系列等）<br />2. 向量数据库：FAISS、Milvus<br />3. 开发框架：Langchain、LlamaIndex<br />4. re-rank模型：bge-reranker-large<br />5. embedding模型：跟知识管理平台一个模型<br />6. 前后端框架：VUE + FastAPI | 1. 大模型：在线调试（GPT4o、GLM）等<br />2. 向量数据库：FAISS、Milvus、TencentCloud VecrorDB<br />3. 开发框架：Langchain、LlamaIndex，如果需求比较简单可以使用Coze、dify平台<br />4. re-ranker模型：bge-reranker-large<br />5. Embedding模型：跟知识管理平台一个模型<br />6. 前后端框架：VUE + FastAPI |
| 效果评估 | 知识效果评估                             | 1. 人工打分<br />2. 基于开源大模型自研评估逻辑               | 1. 人工打分<br />2. 基于在线大模型自研评估逻辑<br />3. RAG评估开源工具，trulens/ragas |

> 最终选型：
>
> | 技术点        | 选型                                 |
> | ------------- | ------------------------------------ |
> | 大模型        | 开源的：GLM4-9B<br />在线模型：GLM-4 |
> | Embedding模型 | Embedding-2                          |
> | 开发框架      | Langchain                            |
> | 向量数据库    | Milvus                               |
> | re-ranker     | 自研算法                             |
> | 效果评估      | 自研框架                             |
> | 前端框架      | VUE                                  |
> | 后端          | FastAPI                              |
> | PDF解析       | 目标检测模型和OCR模型                |

## 开发：核心技术

| 分类         | 描述                 | 地址                                                   | 知识点                                                      |
| ------------ | -------------------- | ------------------------------------------------------ | ----------------------------------------------------------- |
| 数据库       | Python操作           | https://www.sqlalchemy.org/                            | 基于Sqlalchemy持久化存储会话信息                            |
| FastChat     | 模型管理             | https://github.com/lm-sys/FastChat                     | 1. FastChat的原理<br />2. 集成在线模型<br />3. 集成开源模型 |
| 进程与多线程 | Python实现服务并行   | https://docs.python.org/3/library/multiprocessing.html | 学习如何使用multiprocessing做服务并行                       |
| 异步编程     | Python如何写异步代码 | https://docs.python.org/3.11/library/asyncio.html      | 了解Python异步代码风格                                      |



### 数据库构建

- user

```shell
# 主键id、用户名、密码哈希、聊天对话、知识库相关
id 
username
password_hash
conversations
knowledge_bases
```

- conversation（会话模型，表示用户的一个聊天会话）

```shell
# 主键id、用户id、对话框的名称、聊天类型、创建时间、会话和用户多对一的关系、会话和消息一对多的关系
id
user_id
name
chat_type
create_time
user # 会话和用户关系
messages # 会话和消息对应关系
```

- message（聊天记录模型，会话中的一条消息内容）

```shell
# 主键id、会话id、会话关系、聊天类型、用户问题、模型回答、知识库信息、用户评分、用户评分理由、创建时间
id
conversation_id
conversation # 会话关系
chat_type
query
response
meta_data
feedback_score # 用户评分，用于推荐系统
feedback_reason # 用户评分理由，用于推荐系统
create_time
```

> 与知识库相关的库设计：
>
> - knowledge_file（知识文件）
>
> ```shell
> # 主键id、文件名、文件扩展名、所属知识库名称、文档加载器名称、文本切割器名称、文件版本、文件修改时间、文件大小、是否自定义docs、切分文档数量、创建时间
> id 
> file_name
> file_ext
> kb_name
> document_loader_name
> text_splitter_name
> file_version
> file_mtime
> file_size
> custom_docs
> docs_count
> create_time
> ```
>
> - knowledge_base（知识库模型）
>
> ```shell
> # 知识库id、知识库名称、知识库简介（用于Agent）、向量库类型、嵌入模型名称、文件数量、创建时间、用户id（外键）、用户关系
> id
> kb_name
> kb_info
> vs_type
> embed_model
> file_count
> create_time
> user_id
> user
> ```















































